{{- $aboutUsHero := .Params.aboutus_hero }}
{{- $backgroundImage := index $aboutUsHero "backgroundImage" }}
{{- $mainImages := index $aboutUsHero "mainImages" }}
{{- $carouselSettings := index $aboutUsHero "carousel" }}
{{- $pageTitle  := index $aboutUsHero "pageTitle" }}
{{- $title      := index $aboutUsHero "title" }}
{{- $subtitle   := index $aboutUsHero "subtitle" }}

{{- $bgImage := partial "convert-image.html" (dict "src" $backgroundImage "resize" "1800x" "quality" "90") -}}

{{- $processedImages := slice }}
{{- range $mainImages }}
  {{- $img := partial "convert-image.html" (dict "src" . "resize" "1280x" "quality" "100") }}
  {{- $processedImages = $processedImages | append $img.url }}
{{- end }}

<style>
  .hero-background-custom::before {
    background: url('{{ $bgImage.url }}') no-repeat center;
    background-size: 100% 100%;
  }
</style>

<section class="section section-hero" style="padding-top: 0em">
  <div class="section hero-container">
    <div class="hero-background-custom"></div>
    
    <div class="hero-body" style="padding-top:0">
      <div class="container">
        <div class="hero-content">
          <div class="section-badge">
            <span class="section-title">{{ $pageTitle | markdownify }}</span>
          </div>
          
          <h1 class="hero-title">
            {{ $title }}
          </h1>

          {{ with $subtitle }}
          <p class="hero-subtitle mt-3" style="max-width: 1200px;">
            {{ . | markdownify }}
          </p>
          {{ end }}

          {{- partial "ambilight-carousel.html" (dict 
              "id" "ambilight-hero"
              "images" $processedImages
              "autoplay" true
              "colorMode" "dominant"
              "animationSpeed" 0.7
              "carouselInterval" (cond $carouselSettings (default 4000 (index $carouselSettings "interval")) 4000)
              "carouselTransition" (cond $carouselSettings (default 800 (index $carouselSettings "transition")) 800)
          ) -}}

        </div>
      </div>
    </div>
  </div>
</section>